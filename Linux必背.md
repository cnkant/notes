# Linux必背

@author: Kant

@date: 2022/01/14

表示当前的登录的用户@主机名:当前所在目录

$ 普通用户、#root用户

格式：命令 [选项] [参数]	

​			-字母

​			--单词

​			命令 --help；或者man 命令：查看此命令帮助

## 一、pwd	查看前绝对路径

## 二、ls	查看当前目录下的内容

​		选项：-a 显示全部文件，包括隐藏文件(.文件名)

​					-h 以易读的形式查看文件，一般和-l连用

​					-l  以较长的格式列出详细信息（文件权限、文件的硬链接数、文件所属用户、文件所属用户的组、文件大小（字节）、文件的最后修改日期、文件名）

​					!ls	快速执行最近执行过的ls相关命令

​		 如：ls -alh 路径（alh顺序无关）

## 三、clear	清屏（或Ctrl+L）

## 四、cd	切换目录

​		~表示家目录

​		选项：cd 目录	切换到指定目录

​					cd ~	切换到当前用户的主目录==cd

​					cd ..	切换到上一级目录

​					cd -	 切换到上一次目录

​					cd .	切换到当前目录

## 五、tab键自动补全命令或者路径

​			一次按不出来就再按一次

## 六、创建、删除目录

​		1.mkdir 目录名	创建目录

​		2.mkdir -p 路径	创建多层目录

​		3.rmdir 目录名	删除空目录

​		4.rmdir -p 路径	逐层删除空目录

## 七、创建、删除文件

​		1.touch 文件名（可创建多个文件，用空格隔开）	创建文件

​		2. rm 文件名（可创建多个文件，用空格隔开）删除文件（不经回收站）

​		3.rm -i 文件名	会询问是否要删除文件（是y，否则不删）

​		4.rm *	删除当前文件夹下的所有文件（可rm -i *）

​		5.rm -f 文件名	不询问直接删除

​		6.rm -r 目录名	删除目录（不管是否为空）

##  八、复制文件、目录

​		复制的同时可以改名

​		1.cp 源文件(可多个文件，空格隔开) 目标路径

​		2.cp -r 源目录 目标目录	复制目录

​		3.cp -v 源 目标	显示复制的路径信息（从哪复制到哪）

## 九、移动文件、目录

​		1.mv 源文件 目标路径(可用来重命名文件)

​		2.移动、重命名目录和1用法一样，不用加-r

​		3.mv -v 源文件 目标路径	显示移动的路径信息（从哪移动到哪）

## 十、echo	回显

​		1.echo $?	显示上一次执行结果的状态（0表正常结束，1表输入输出错误...）

​		2.echo $PATH	显示系统环境变量

## 十一、>、>>	重定向

​		1.>	输出重定向（用来将输出到屏幕的内容重定向到一个指定位置，一般是指定一个文件，不管此文件是否存在，都会创建新文件并保存输出的数据）

​		2.>>	输出重定向，区别是此方式是追加数据（不存在则创建）

## 十二、cat、more	查看文件

​		1.cat 文件名	查看小型文件（多个文件用空格分开）（不打开文件）

​		2.more 文件名	查看大文件（空格键显示下一屏信息、回车键显示下一行信息、b键显示上一屏信息、f键显示下一屏信息、按q退出）

​		例如：cat a.txt b.txt > c.txt：将a和b的文件内容合并存到c中

## 十三、|	管道命令

​	1.|左边命令的输出结果作为|右边命令的输入，一般与more连用，如：ls -l | more

## 十四、ln	链接命令

​		1.ln -s 源路径 目标路径	创建软连接（类似Windows的快捷方式），无论对哪个文件（目录）进行操作都会影响另外一个文件（目录）。源路径一般使用绝对路径（否则目标快捷方式移动到其他位置时会访问不到源文件）。

​		2.ln 源文件 目标文件	创建硬链接（类似于python的引用），将多个文件名指向同一个文件，数据操作会互相同步。删除源文件，目标文件还在。使用绝对路径和相对路径均可。硬链接会改变文件属性信息中的连接数据。不允许对目录做硬链接。目录的文件信息中的连接数表示，当前目录下包含多少个子目录。

## 十五、grep	文本搜索命令

​		1.grep "要搜索的数据" 文件名	（默认忽略大小写）

​		2.-i	忽略大小写

​		3.-n	显示匹配到的行号

​		4.-v	显示不包含匹配文本的所有行

​		5.与正则表达式配合使用（^以指定字符串开头、$以指定字符串结尾、.匹配一个非换行符的字符）

​		6.与管道连用，如：ps aux | grep mysql（ps aux	查看当前所以进程）

​		例如：grep -in '^1' a.txt	grep -in '2$' a.txt	grep -in '1.2' a.txt

## 十六、find	查找文件

​		1.find 查找路径 -name 被查找文件

​		2.查找时，不仅在指定路径查找，还会在其子路径下进行查找

​		3.两个通配符：*表示0个或多个字符；?表示任意一个字符（和正则表达式不同）

## 十七、zip、gzip、bzip2	压缩、解压缩文件

​		1.zip 压缩包名 被压缩文件	（后缀名.zip）

​		2.解压：unzip 压缩包名

​		3.gzip 被压缩文件名	（后缀名.gz）

​		4.解压：gzip -d 压缩包名

​		5.bzip2 被压缩文件名	（后缀名.bz2）

​		6.解压：bzip2 -d 压缩包名

## 十八、tar	打包、解包文件

​		1.打包不压缩（不改变文件大小），后缀名.tar

​		2.选项的 - 可以不写（特殊哦）

​		3.使用选项时，f 选项一定是在所有的选项最右侧，后面跟的是包名

​		4.c：创建打包文件、v：显示打包或者解包的详细信息、f：指定包名（必须放在所有选项的最后面）

​		5.tar cvf 打包后的文件名 被打包文件

​		6.解包：tar xvf 包名

​		7.解包：tar xvf 包名 -C 存放目录

​		8.z 和 j 选项可以实现打包文件时实现压缩，压缩格式分别是 .gz 和 .bz2

​		9.格式一：（掌握）

​				tar -zcvf 文件名.tar.gz 被压缩文件

​				tar -zxvf 压缩包名 -C 指定解压目录

​		10.格式二：（掌握）

​				tar jcvf 文件名.tar.bz2 被压缩文件

​				tar jxvf 压缩包名 -C 指定解压目录

## 十九、chmod	文件权限（字母法）

​		如：-rwxr-xr-x

​		分解：-：文件类型、rwx：文件所有者权限、r-x：文件所有者所属组用户权限、r-x：其他用户权限

​		文件类型：-：普通文件、d：目录、l：（软）链接文件

​		权限：r：读取权限、w：写入权限、x：执行权限、-无权限（占位符，必须为三位），文件可执行时名字是绿色

​		角色说明：u：user，文件所有者、g：group，用户组、o：other，其他用户、a：all，所有用户

​		权限设置：+：增加权限、-：撤销权限、=：设置权限

​		1.chmod g+w 文件名	对此文件的用户组增加写权限

​		2.chmod u-x,g-x 文件名	对此文件的所有者和用户组撤销执行权限

## 二十、chmod	文件权限（数字法）

​		说明：r：权限值为4、w：权限值为2、x：权限值为1、-：权限值为0，设置为哪个权限将它们的权限值相加即可。

​		对目录：x权限可进入目录中、w权限可在目录中创建和删除文件、r权限可以查看目录中的内容

​		1.chmod 777 文件名	所有用户设置为满权限

​		2.chmod 700 文件名	给文件所有者设置为满权限，剩下用户权限为空

​		3.chmod 7 文件名	给其他用户设置为满权限，剩下用户权限为空（从右到左）

​		4.文件默认权限：755、目录默认权限：775（Ubuntu）

## 二十一、sudo	获取管理员权限

​		1.sudo 常规命令	临时获取管理员权限去执行命令

​		2.sudo -s	切换到root用户，获取管理员权限

​		3.exit	退出当前用户

​		4.whoami	查看当前用户

​		5.who	查看所有的登录用户

​		6.sudo passwd 用户名	修改指定用户的密码，不指定用户默认修改当前登录用户的密码

​		7.which 命令	查看命令的存储位置

​		8.shutdown -h now（或0）	立刻关机

​		9.rebot	重启

## 二十二、useradd	添加用户

​		有管理员权限才能添加用户

​		1.useradd 用户名	添加用户

​		2.useradd -m 用户名	自动在\home下创建用户主目录，名字为用户名 

​		3.useradd -m -g 用户组gid 用户名	指定用户所属的用户组，不指定会创建一个同名的用户组

​		4.id 用户名	查看用户信息（uid：用户id、gid：用户组id、组：用户所在的用户组） 

​		5./etc/passwd文件下保存着所有用户的信息（用户名:密码占位符:UID:GID:[用户描述]:用户主目录所在位置:所用shell的类型，也叫命令环境，一般是bash或者sh，默认是sh），自己创建的用户的uid在1000以上

​		6./etc/group文件下保存着所有用户组的信息（用户组名:密码占位符，一般无密码:GID:）

​		7./etc/shadow文件下保存着所有用户的密码信息（一般md5加密，若无密码则显示!）

## 二十三、su	切换用户

​		1.su  用户名	如果切换到root用户，此方法gwd后会发现用户环境还是切换之前的

​		2.su - 用户名	可正常切换到root用户环境下

## 二十四、userdel	删除用户

​		1.userdel -r 用户名	不加-r的话不会删除\home下的用户家目录

​		2.用户没有设置密码的话切换不了

## 二十五、groupadd	添加用户组

​		1.groupadd 组名	创建用户组

## 二十六、groupdel	删除用户组

​		1.如果创建的组作为某个用户的主组时，要先手动userdel删除用户再删除组，否则删除不了用户组

## 二十七、ssh和scp（不常用，常用ftp）

​		1.sudo apt-get install openssh-server	安装ssh服务器

​		2.ftp传输的文件默认在/var/ftp/shared/下

​		3.scp（远程复制文件）

​		4.上传文件：scp 本地文件名 目标用户名@ip地址:远端路径

​		5.下载文件：scp 目标用户名@ip地址:远端路径/文件名 保存位置

## 二十八、vim

​		命令模式、编辑模式、末行模式（打开文件进入时是命令模式）

​		1.命令模式按 （i在当前光标位置处插入、a在当前光标下一个字符位置处插入、o在下一行插入一个空行） 进入编辑模式，按 : 进入末行模式

​		2.编辑模式和末行模式按ESC进入命令模式，编辑模式和末行模式之间不能直接进行转换

​		3.替换：命令模式下按r会进编辑模式， 按一次r可替换一次光标位置的字符；命令模式下按R会进编辑模式，可持续替换

​		4.只有在末行模式下才能退出，末行模式下：w保存文件，q退出，! 强制执行，x保存并退出（不保存退出不了可q! 强制退出），设置行号set nu，取消行号set nonu，语法高亮（关闭高亮）syntax on（off）

​		5.命令模式下：

​			yy：复制一行，nyy：复制n行，p：在光标处粘贴，np：在光标处粘贴n次（向下），dd：删除一行，ndd：删除n行，x：向后删除一个字符，X：向前删除一个字符

​			移动光标：方向键，h（左）、j（下）、k（上）、l（右），gg：移动到首行，G：移动到末行，nG：移动到指定行，$：移动到行尾，0、^：移动到行首

​			撤销操作：u：撤销，ctrl+r：反撤销

​			缩进：>>：向右缩进，<<：向左缩进

​			查找：/查找内容（n跳到下一个，N跳到上一个），?查找内容（n跳到上一个，N跳到下一个）

​			替换：%s/要替换的内容/替换后的内容/g：全局替换（/g可以不写）

​						开始行号,结束行号s/要替换的内容/替换后的内容：局部替换

## 二十九、安装、卸载软件

​		1.离线安装：sudo dpkg -i 包名（后缀名deb）

​		2.在线安装：sudo apt-get(不写-get也行) install 安装包

​				更改国内镜像，打开https://mirrors.tuna.tsinghua.edu.cn/，Ubuntu 的软件源配置文件是 `/etc/apt/sources.list，将系统自带的该文件做个备份，将该文件替换，然后执行sudo apt-get update

​		2.离线安装包卸载：sudo dpkg -r 包名（后缀名deb）， sudo dpkg -P 包名	可同时清除配置文件

​		3.在线安装包的卸载：sudo apt-get remove 包名，sudo apt-get --purge remove 包名（或者sudo apt-get purge 包名）	可同时清除配置文件

## 三十、进程、线程

​		进程：操作系统进行资源分配的基本单位

​		线程：任务执行的基本单位（CPU调度的基本单位）

​		关系：线程必须依附在进程里面，没有进程就没有线程；一个进程默认提供了一条主线程，一个进程可以创建多条线程

​		区别：进程之间不共享全局变量，线程之间共享全局变量（但是要注意资源竞争问题，解决方法：互斥锁或线程同步）

​				创建进程的资源开销要大于创建线程的资源开销（创建一个进程相当于把原来进程的资源复制一份）

​				多进程开发比单进程多线程开发稳定性要强

​		优缺点：

​				进程优点：可以用多核；缺点：资源开销大

​				线程优点：资源开销小；缺点：不能使用多核（因为CPython解释器中GIL锁的存在，使得同一时刻只有一个线程在运行）

## 三十一、常用目录及解释

1、可以在家目录root或home，以及temp目录下随便放东西。

2、根目录下的bin和sbin，usr目录下的bin和sbin，这四个目录都是用来保存系统命令的。其中，普通用户可以执行bin，而sbin只有超级用户才能执行。

3、根目录下的boot为启动目录，保存着用户的启动数据，不能随意操作。

4、根目录下的dev为特殊文件保存目录，里面大都是硬件文件

5、根目录下的etc为配置文件保存目录。

6、根目录下的home为普通用户家目录，用户主目录的基点，比如用户user的主目录就是/home/user，可以用~user表示。root为超级用户家目录， 是系统管理员的主目录。

7、根目录下的lib是函数库保存位置。

8、根目录下的media、misc、mnt目录是作为外接存储设备的盘符，老式的Linux是没有media和misc目录的，所以也可以在mnt目录下新建media和misc目录

9、根目录下的proc和sys目录不能直接操作，这两个目录保存的是内存的过载点（即数据是直接写在内存中的，我们是不能直接操作的）。

10、/usr	系统软件资源目录

​       /usr/bin/系统命令（普通用户）

​       /usr/sbin/系统命令（超级用户）

11、/var	系统相关文档内容，动态数据保存位置。主要保存缓存、日志等。









​	





​		













